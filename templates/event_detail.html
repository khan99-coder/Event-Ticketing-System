{% extends 'base.html' %}

{% block content %}
  <h1>{{ event.title }}</h1>
  <p><strong>Description:</strong> {{ event.description }}</p>
  <p><strong>Date:</strong> {{ event.date }}</p>
  <p><strong>Time:</strong> {{ event.time }}</p>
  <p><strong>Location:</strong> {{ event.location }}</p>

  <h2>Ticket Details</h2>
  {% for ticket in event.tickets %}
    <div>
      <p><strong>Ticket Type:</strong> {{ ticket.ticket_type }}</p>
      <p><strong>Quantity:</strong> {{ ticket.quantity }}</p>
      <p><strong>Price per Ticket:</strong> {{ ticket.price }}</p>
    </div>
  {% endfor %}

  <h2>Subtotal</h2>
  <p>
    <strong>Subtotal:</strong> {{ event.calculate_subtotal() }}
  </p>

  <form method="POST" action="/create_event">
    {{ form.csrf_token }}
    <button type="submit" class="btn btn-primary">Calculate Subtotal</button>
  </form>

   <!-- Add the "Delete Event" button -->
  
   <form method="DELETE" action="{{ url_for('delete_event', event_id=event.id) }}">
     {{ form.csrf_token }}
     <input type="hidden" name="_method" value="DELETE">
     <button type="button" class="btn btn-danger" onclick="confirmDelete()">Delete Event</button>
   </form>

   <script>
    function confirmDelete() {
      if (confirm("Are you sure you want to delete this event?")) {
        document.getElementById("delete-form").submit();
      }
    }
  </script>

{% endblock %}

